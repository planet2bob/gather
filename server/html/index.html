<!DOCTYPE html>
<html lang="en">
<head>
  <title>Gather</title>
  <meta charset="utf-8">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='./css/bootstrap.min.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='./css/normal.css') }}">
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='./css/index.css') }}">

  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='./css/font-awesome.min.css') }}">

  <script src="{{ url_for('static', filename='./js/bootstrap.min.js') }}"></script>

  <style>
  </style>
</head>
<body>

<div class="container-fluid" id="title">

  <div class="row">
    <div class="col-sm-4 text-right"></div>
    <div class="col-sm-4 text-center">
      <h4 class="text-center" id="text-title">gather</h4>
    </div>
    <div class="col-sm-4 text-right">

      <div class="dropdown">

        <button class="btn btn-lg btn-default dropdown-toggle" type="button" id="settings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          <big><span class="fa fa-cog"></span></big>
        </button>

        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="settings">
          <li><a href="#">Accounts</a></li>
          <li><a href="#" class="pull-right">Add an account </small><span class="fa fa-plus" ></span></a></li>
          <li><a href="#">Other settings</a></li>

          <li role="separator" class="divider"></li>

          <li><a class="pull-right" href="#">Log out</a></li>
        </ul>

      </div>

    </div>
  </div>

</div>


<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-3 sidenav">
      <h3>Contacts <a href="#" id="add-contact"><span class="fa fa-plus pull-right"></span></h3></a>
      
      <div class="input-group" id="search-box">
        <input type="text" class="form-control" placeholder="Search Contacts...">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button">
            <span class="fa fa-search"></span>
          </button>
        </span>
      </div>

      <br>

      <ul class="nav nav-pills nav-stacked" id="contact-list">
        <li class="active"><a href="#section1">Rachel Hong</a></li>
        <li><a href="#section2">Joe Biden</a></li>
        <li><a href="#section3">Andrew Wang</a></li>
        <li><a href="#section3">Max Sun</a></li>
        <li><a href="#section3">Kevin Chen</a></li>
        <li><a href="#section3">Veronica Tang</a></li>
        <li><a href="#section3">Ale Aguirre</a></li>
      </ul>

    </div>

    <div class="col-sm-9 container-fluid">
      <div class="container-fluid" id="messages-box">
        <div class="row">
          <div class="alert alert-info col-sm-9" id="received-message">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

            <h6 class="pull-right text-muted" id="signature">RH <span class="fa fa-skype"></span></h6>
          </div>
        </div>

        <div class="row">
          <div class="alert alert-info col-sm-9" id="received-message">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

            <h6 class="pull-right text-muted" id="signature">RH <span class="fa fa-wechat"></span></h6>
          </div>
        </div> 

        <div class="row">
          <div class="alert alert-success col-sm-9 pull-right" id="sent-message">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>

            <h6 class="pull-right text-muted" id="signature">CW <span class="fa fa-wechat"></span></h6>
          </div>
        </div>

      </div>

      <hr>

      <div class="container-fluid">

        <div class="col-sm-1" style="width: 7%">

          <div class="dropup">
            <button class="btn btn-default dropdown-toggle" type="button" id="platform" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              <big><span class="fa fa-wechat"></span></big>
            </button>

            <ul class="dropdown-menu" aria-labelledby="platform" id="platform-dropdown">

              <li><a href="#"><big><span class="fa fa-wechat"></span></big></a></li>
              <li><a href="#"><big><span class="fa fa-skype"></span></big></a></li>
              <li><a href="#"><big><span class="fa fa-slack"></span></big></a></li>
              <li><a href="#"><big><span class="fa fa-whatsapp"></span></big></a></li>

            </ul>
          </div>

          <br>

          <div class="dropup">
            <button class="btn btn-default dropdown-toggle" type="button" id="emoji" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              <big><span class="fa fa-smile-o"></span></big>
            </button>

            <ul class="dropdown-menu" aria-labelledby="emoji" id="emoji-dropdown">

              <li><a href="#"><big><span class="fa fa-smile-o"></span></big></a></a></li>
              <li><a href="#"><big><span class="fa fa-meh-o"></span></big></a></li>
              <li><a href="#"><big><span class="fa fa-frown-o"></span></big></a></li>
              <li><a href="#"><big><span class="fa fa-heart-o"></span></big></a></li>

            </ul>
          </div>

        </div>

        <div class="col-sm-11" style="width: 93%">  
          <form role="form">
            <div class="form-group">
                <textarea class="form-control" id="own-message" rows="4" required></textarea>
            </div>
          </form>
        </div>

      </div>
      
    </div>
  </div>
</div>

<!-- <footer class="container-fluid">
  <p>Footer Text</p>
</footer> -->

</body>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function() {
        console.log('connected!');
        socket.emit('connected', {
            username: 'maxsun',
            password: 'abcd'
        });
    });

    socket.on('status', function (data) {
        console.log(data);
    });

    socket.on('message', function (data) {
        console.log(data);
        var row = document.createElement('div');
        row.class = "row";
        var message = document.createElement('div');
        message.id = "sent-message";
        message.className = "alert alert-success col-sm-9 pull-right";
        var text = document.createElement('p');
        text.innerText = data.message;
        message.appendChild(text);
        var h6 = document.createElement('h6');
        h6.className = "pull-right text-muted";
        h6.id = "signature";
        h6.innerText = data.sender + ' ';
        var logoSpan = document.createElement('span');
        logoSpan.className = "fa fa-" + data.source;
        h6.appendChild(logoSpan);
        message.appendChild(h6);
        row.appendChild(message);
        $('#messages-box').append(row);
        $('#messages-box').scrollTop($('#messages-box')[0].scrollHeight);
    });

    function requestMessages() {
        socket.emit('requestMessages', {
            username: 'maxsun',
            password: 'abcd'
        });
    }

    window.setInterval(function(){
        requestMessages();
    }, 5000);
</script>

</html>
